User State API
==============

Each utterance in a **Dialog** is generated either by a **Human** or by a **Bot**. To understand, which of two has generated
the utterance, refer to the ``user.user_type`` field:

     .. code:: json

        "utterances": [
          {
          "user": {
            "user_type": "human"
          }
        }]

A `Skill <skill>`__  can update any fields in **User** (**Human** or **Bot**) objects. If a **Skill** updates a **Human**,
the **Human** fields will be changed in this utterance accordingly. If a **Skill** updates a **Bot**, the **Bot** fields will be
changed in the *next* (generated by the bot) utterance.

Each new dialog starts with a new **Bot** with all default fields. However, the **Human** object is updated permanently, and
when a **Human** starts a new dialog, the object is retrieved from a database with all updated fields.

The history of all changes made by skills to users can be looked up at the selected skills responses
in the ``selected_skills`` field of a human utterance:

    .. code:: json

        "utterances": [
          {
          "user": {
            "user_type": "human"
          },
          "selected_skills": {}
        }]

.. _skill: https://deeppavlov-agent.readthedocs.io/en/latest/api/services_http_api.html#skill
